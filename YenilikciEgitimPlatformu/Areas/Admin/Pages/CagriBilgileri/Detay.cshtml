@page "{id:int}"
@model YenilikciEgitimPlatformu.Areas.Admin.Pages.CagriBilgileri.DetayModel
@{
    ViewData["Title"] = "Çağrı Detayı";
    Layout = "~/Pages/Shared/_LayoutDashboard.cshtml";
}

<div class="max-w-5xl mx-auto">
    <!-- Header with Actions -->
    <div class="mb-6 flex items-center justify-between">
        <div>
            <div class="flex items-center gap-3 mb-2">
                <h1 class="text-2xl font-bold text-gray-900 dark:text-white">
                    @Model.Cagri.Baslik
                </h1>
                @if (Model.Cagri.KullaniciTakipEdiyor)
                {
                    <span class="px-3 py-1 text-xs font-semibold text-green-800 bg-green-100 dark:bg-green-900/30 dark:text-green-300 rounded-full">
                        <i class="fas fa-check-circle mr-1"></i> Yayında
                    </span>
                }
                else
                {
                    <span class="px-3 py-1 text-xs font-semibold text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 rounded-full">
                        <i class="fas fa-eye-slash mr-1"></i> Taslak
                    </span>
                }
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400">
                <i class="fas fa-building mr-1"></i> @Model.Cagri.Kurum
                <span class="mx-2">•</span>
                <i class="fas fa-tag mr-1"></i> @Model.Cagri.TuruText
            </p>
        </div>
        
        <div class="flex gap-2">
            <a asp-page="./Duzenle" asp-route-id="@Model.Cagri.Id" 
               class="px-4 py-2 text-white bg-petrol-500 rounded-lg hover:bg-petrol-600 transition-colors">
                <i class="fas fa-edit mr-2"></i>
                Düzenle
            </a>
            <a asp-page="./Index" 
               class="px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                Geri
            </a>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Main Content -->
        <div class="lg:col-span-2 space-y-6">
            <!-- Kapak Görseli -->
            @if (!string.IsNullOrEmpty(Model.Cagri.KapakResmiUrl))
            {
                <div class="card-modern rounded-xl overflow-hidden">
                    <img src="@Model.Cagri.KapakResmiUrl" 
                         alt="@Model.Cagri.Baslik"
                         class="w-full h-64 object-cover" />
                </div>
            }

            <!-- Kısa Açıklama -->
            <div class="card-modern rounded-xl p-6">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">
                    <i class="fas fa-info-circle text-petrol-500 mr-2"></i>
                    Özet
                </h3>
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                    @@Model.Cagri.KisaAciklama
                </p>
            </div>

            <!-- Detaylı Açıklama -->
            <div class="card-modern rounded-xl p-6">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">
                    <i class="fas fa-file-alt text-petrol-500 mr-2"></i>
                    Detaylı Açıklama
                </h3>
                <div class="prose dark:prose-invert max-w-none">
                    @Html.Raw(Model.Cagri.Aciklama.Replace("\n", "<br>"))
                </div>
            </div>

            <!-- Ek Dosyalar -->
            @if (Model.Cagri.EkDosyalar != null && Model.Cagri.EkDosyalar.Any())
            {
                <div class="card-modern rounded-xl p-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                        <i class="fas fa-paperclip text-petrol-500 mr-2"></i>
                        Ek Dosyalar
                    </h3>
                    <div class="space-y-3">
                        @foreach (var dosya in Model.Cagri.EkDosyalar)
                        {
                            <a href="@dosya.DosyaUrl" 
                               target="_blank"
                               class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors group">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-petrol-100 dark:bg-petrol-900/30 flex items-center justify-center text-petrol-600 dark:text-petrol-400">
                                        <i class="fas fa-file-pdf text-lg"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-900 dark:text-white">@dosya.DosyaAdi</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">@dosya.DosyaBoyutuText</p>
                                    </div>
                                </div>
                                <i class="fas fa-download text-gray-400 group-hover:text-petrol-500 transition-colors"></i>
                            </a>
                        }
                    </div>
                </div>
            }
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
            <!-- İstatistikler -->
            <div class="card-modern rounded-xl p-6">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                    <i class="fas fa-chart-bar text-petrol-500 mr-2"></i>
                    İstatistikler
                </h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-600 dark:text-gray-400">
                            <i class="fas fa-eye w-5"></i> Görüntülenme
                        </span>
                        <span class="font-semibold text-gray-900 dark:text-white">
                            @Model.Cagri.GoruntulenmeSayisi
                        </span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-600 dark:text-gray-400">
                            <i class="fas fa-users w-5"></i> Takipçi
                        </span>
                        <span class="font-semibold text-gray-900 dark:text-white">
                            @Model.Cagri.TakipciSayisi
                        </span>
                    </div>
                </div>
            </div>

            <!-- Tarihler -->
            <div class="card-modern rounded-xl p-6">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                    <i class="fas fa-calendar text-petrol-500 mr-2"></i>
                    Önemli Tarihler
                </h3>
                <div class="space-y-3">
                    <div>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Başlangıç</p>
                        <p class="font-semibold text-gray-900 dark:text-white">
                            <i class="fas fa-calendar-day text-green-500 mr-2"></i>
                            @Model.Cagri.BaslangicTarihi..Value.ToString("dd MMMM yyyy")
                        </p>
                    </div>
                    @if (Model.Cagri.BitisTarihi.HasValue)
                    {
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Bitiş</p>
                            <p class="font-semibold text-gray-900 dark:text-white">
                                <i class="fas fa-calendar-times text-red-500 mr-2"></i>
                                @Model.Cagri.BitisTarihi.Value.ToString("dd MMMM yyyy")
                            </p>
                        </div>
                            var kalanGun = (Model.Cagri.BitisTarihi.Value - DateTime.Now).Days;
                        @if (kalanGun > 0)
                        {
                            <div class="p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
                                <p class="text-sm text-orange-800 dark:text-orange-300 font-medium">
                                    <i class="fas fa-hourglass-half mr-2"></i>
                                    @kalanGun gün kaldı
                                </p>
                            </div>
                        }
                        else if (kalanGun == 0)
                        {
                            <div class="p-3 bg-red-50 dark:bg-red-900/20 rounded-lg">
                                <p class="text-sm text-red-800 dark:text-red-300 font-medium">
                                    <i class="fas fa-exclamation-triangle mr-2"></i>
                                    Son gün!
                                </p>
                            </div>
                        }
                        else
                        {
                            <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    Süresi doldu
                                </p>
                            </div>
                        }
                    }
                </div>
            </div>

            <!-- İletişim -->
            @if (!string.IsNullOrEmpty(Model.Cagri.BasvuruLinki) || 
                 !string.IsNullOrEmpty(Model.Cagri.IletisimEmail) || 
                 !string.IsNullOrEmpty(Model.Cagri.IletisimTelefon))
            {
                <div class="card-modern rounded-xl p-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                        <i class="fas fa-address-card text-petrol-500 mr-2"></i>
                        İletişim
                    </h3>
                    <div class="space-y-3">
                        @if (!string.IsNullOrEmpty(Model.Cagri.BasvuruLinki))
                        {
                            <a href="@Model.Cagri.BasvuruLinki" 
                               target="_blank"
                               class="flex items-center gap-3 p-3 bg-petrol-50 dark:bg-petrol-900/20 rounded-lg hover:bg-petrol-100 dark:hover:bg-petrol-900/30 transition-colors">
                                <i class="fas fa-external-link-alt text-petrol-600 dark:text-petrol-400"></i>
                                <span class="text-sm text-petrol-700 dark:text-petrol-300 font-medium">
                                    Başvuru Sayfası
                                </span>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(Model.Cagri.IletisimEmail))
                        {
                            <a href="mailto:@Model.Cagri.IletisimEmail" 
                               class="flex items-center gap-3 text-sm text-gray-700 dark:text-gray-300 hover:text-petrol-600 dark:hover:text-petrol-400">
                                <i class="fas fa-envelope w-5"></i>
                                <span>@Model.Cagri.IletisimEmail</span>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(Model.Cagri.IletisimTelefon))
                        {
                            <a href="tel:@Model.Cagri.IletisimTelefon" 
                               class="flex items-center gap-3 text-sm text-gray-700 dark:text-gray-300 hover:text-petrol-600 dark:hover:text-petrol-400">
                                <i class="fas fa-phone w-5"></i>
                                <span>@Model.Cagri.IletisimTelefon</span>
                            </a>
                        }
                    </div>
                </div>
            }

            <!-- Hedef Kitle -->
            @if (!string.IsNullOrEmpty(Model.Cagri.HedefKitle))
            {
                <div class="card-modern rounded-xl p-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">
                        <i class="fas fa-bullseye text-petrol-500 mr-2"></i>
                        Hedef Kitle
                    </h3>
                    <p class="text-sm text-gray-700 dark:text-gray-300">
                        @Model.Cagri.HedefKitle
                    </p>
                </div>
            }

            <!-- Konum -->
            @if (!string.IsNullOrEmpty(Model.Cagri.HedefIlAdi))
            {
                <div class="card-modern rounded-xl p-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">
                        <i class="fas fa-map-marker-alt text-petrol-500 mr-2"></i>
                        Konum
                    </h3>
                    <p class="text-sm text-gray-700 dark:text-gray-300">
                        @Model.Cagri.HedefIlAdi
                        @if (!string.IsNullOrEmpty(Model.Cagri.HedefIlceAdi))
                        {
                            <span> / @Model.Cagri.HedefIlceAdi</span>
                        }
                    </p>
                </div>
            }

            <!-- Kayıt Bilgileri -->
            <div class="card-modern rounded-xl p-6">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">
                    <i class="fas fa-info text-petrol-500 mr-2"></i>
                    Kayıt Bilgileri
                </h3>
                <div class="space-y-2 text-xs text-gray-600 dark:text-gray-400">
                    <div>
                        <span class="font-medium">Oluşturma:</span><br>
                        @Model.Cagri.OlusturmaTarihi.ToString("dd.MM.yyyy HH:mm")
                    </div>
                    @if (Model.Cagri.GuncellemeTarihi.HasValue)
                    {
                        <div>
                            <span class="font-medium">Güncelleme:</span><br>
                            @Model.Cagri.GuncellemeTarihi.Value.ToString("dd.MM.yyyy HH:mm")
                        </div>
                    }
                    <div>
                        <span class="font-medium">Slug:</span><br>
                        <code class="text-petrol-600 dark:text-petrol-400">@Model.Cagri.Slug</code>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@* 
SAYFA AÇIKLAMASI:
==================
Admin Çağrı Detay Görünümü

Layout:
- 2/3 Ana içerik (Sol)
- 1/3 Sidebar (Sağ)

Bölümler:
1. Header (Başlık + Durumu + Aksiyonlar)
2. Ana İçerik:
   - Kapak görseli
   - Kısa açıklama
   - Detaylı açıklama
   - Ek dosyalar
3. Sidebar:
   - İstatistikler
   - Tarihler + Geri sayım
   - İletişim bilgileri
   - Hedef kitle
   - Konum
   - Meta bilgiler

Özellikler:
- Responsive design
- Glassmorphism cards
- Icon integration
- Countdown timer
- Download links
- External links
*@
