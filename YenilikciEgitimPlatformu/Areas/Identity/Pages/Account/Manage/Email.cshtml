@page
@model EmailModel
@{
    ViewData["Title"] = "E-posta Yönetimi";
    ViewData["ActivePage"] = ManageNavPages.Email;
    Layout = "_Layout";
}

<div class="max-w-2xl">
    <div class="mb-6">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2">
            <i class="fas fa-envelope text-accent-500"></i> @ViewData["Title"]
        </h3>
        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">E-posta adresinizi güncelleyin veya doğrulayın.</p>
    </div>

    <partial name="_StatusMessage" for="StatusMessage" />

    <form id="email-form" method="post" class="space-y-6 mt-6">
        <div asp-validation-summary="All" class="text-accent-600 text-sm font-bold bg-accent-50 dark:bg-accent-900/10 p-3 rounded-xl border border-accent-100 dark:border-accent-900/20" role="alert"></div>

        <!-- Mevcut Email -->
        <div class="relative group">
            <input asp-for="Email" class="peer block px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-100 dark:bg-petrol-900/30 rounded-xl border border-gray-200 dark:border-petrol-700 cursor-not-allowed" placeholder=" " disabled />
            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                <i class="fas fa-envelope-open text-gray-400"></i>
            </div>
            <label asp-for="Email" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] left-10 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:top-3.5 peer-focus:scale-75 peer-focus:-translate-y-4 font-medium">Mevcut E-posta</label>

            @if (Model.IsEmailConfirmed)
            {
                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                    <span class="inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border border-green-200 dark:border-green-800">
                        <i class="fas fa-check-circle"></i> Doğrulandı
                    </span>
                </div>
            }
            else
            {
                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                    <button id="email-verification" type="submit" asp-page-handler="SendVerificationEmail" class="text-xs font-bold text-accent-500 hover:text-accent-600 underline">
                        Doğrulama Gönder
                    </button>
                </div>
            }
        </div>

        <!-- Yeni Email -->
        <div class="relative group">
            <input asp-for="Input.NewEmail" class="peer block px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-50/50 dark:bg-petrol-900/50 rounded-xl border border-gray-300 dark:border-petrol-600 appearance-none dark:text-white focus:outline-none focus:ring-0 focus:border-accent-500 focus:bg-white dark:focus:bg-petrol-900 transition-all" placeholder=" " autocomplete="email" />
            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                <i class="fas fa-at text-gray-400 peer-focus:text-accent-500 transition-colors"></i>
            </div>
            <label asp-for="Input.NewEmail" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] left-10 peer-focus:text-accent-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:top-3.5 peer-focus:scale-75 peer-focus:-translate-y-4 font-medium pointer-events-none">Yeni E-posta Adresi</label>
            <span asp-validation-for="Input.NewEmail" class="text-red-500 text-xs mt-1 block pl-2 font-medium"></span>
        </div>

        <button id="change-email-button" type="submit" asp-page-handler="ChangeEmail" class="group relative w-full sm:w-auto flex justify-center py-3 px-6 border border-transparent text-sm font-bold rounded-xl text-white bg-gradient-to-r from-accent-500 to-accent-600 hover:from-accent-600 hover:to-accent-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-500 shadow-lg shadow-accent-500/30 hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300">
            <span class="flex items-center gap-2">
                <i class="fas fa-paper-plane group-hover:translate-x-1 transition-transform"></i>
                E-postayı Güncelle
            </span>
        </button>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}